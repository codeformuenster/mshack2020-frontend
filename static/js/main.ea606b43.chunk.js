(this["webpackJsonpmshack20-frontend"]=this["webpackJsonpmshack20-frontend"]||[]).push([[0],{268:function(e,t,a){e.exports=a(472)},472:function(e,t,a){"use strict";a.r(t);var n=a(500),r=a(1),i=a.n(r),o=a(54),c=a.n(o),s=a(212),l=a(16),p=a(37),u=a.n(p),m=a(55),d=a(69),h=a(56),g=a(90),f=a(12),v=a(488),E=a(489),b=a(501),w=a(490),x=a(491),y=a(487),j=a(492),O=a(493),k=a(474),S=a(503),I=a(45),B=a.n(I),N=a(494),C=a(495),M=a(496),D=a(497),z=a(498);function W(e){return i.a.createElement(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var P=a(199),G=a(200),H=a(216),J=a(215),L=a(73),V=a(502),K={position:"absolute",top:0,left:0,padding:"10px"},R=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={viewport:{latitude:51.962078,longitude:7.624472,zoom:14,bearing:0,pitch:0,width:"100%",height:700},popupInfo:null,devices:[]},n}return Object(G.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B()("https://counting-backend.codeformuenster.org/devices");case 2:a=t.sent,e.setState({devices:a.data});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"renderPopup",value:function(e){var t=this;return this.state.popupInfo&&i.a.createElement(S.a,{href:this.state.devices[e].id},i.a.createElement(L.c,{tipSize:5,anchor:"bottom-right",longitude:this.state.devices[e].lon,latitude:this.state.devices[e].lat,onMouseLeave:function(){return t.setState({popupInfo:null})},closeOnClick:!0},i.a.createElement(y.a,null,this.state.devices[e].id)))}},{key:"render",value:function(){var e=this,t=this.state.viewport;return i.a.createElement(L.d,Object.assign({},t,{onViewportChange:function(t){return e.setState({viewport:t})},mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxApiAccessToken:"pk.eyJ1Ijoic2ltc2Fsb3IiLCJhIjoiY2tmamhwMWVyMGhmMDMwcWh6MXdiM2VteCJ9.PCIgKMZhUfVyhyECwTQKpg"}),i.a.createElement("div",{className:"nav",style:K},i.a.createElement(L.b,{onViewportChange:function(t){return e.setState({viewport:t})}}),this.state.devices.map((function(t,a){var n="circle";return t.id.includes("ttgo-beam")?n="wifi":t.id.includes("cam")?n="camera":t.id.includes("mobile")?n="mobile":t.id.includes("street")&&(n="angle down"),i.a.createElement("div",{key:a}," ",i.a.createElement(L.a,{longitude:t.lon,latitude:t.lat},i.a.createElement(V.a,{name:n,size:"big",onMouseEnter:function(){return e.setState({popupInfo:a})},onMouseLeave:function(){return e.setState({popupInfo:null})}}))," ")})),this.renderPopup(this.state.popupInfo)))}}]),a}(r.Component);function T(){return i.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(S.a,{color:"inherit",href:"http://codeformuenster.org/"},"M\xfcnster Z\xe4hlt")," ",(new Date).getFullYear(),".")}var A=Object(v.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(h.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",width:"100%"},fixedHeight:{height:240}}}));function F(){var e=A(),t=Object(r.useState)(),a=Object(d.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(),s=Object(d.a)(c,2),l=s[0],p=s[1];return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()("https://counting-backend.codeformuenster.org/counts");case 2:return t=e.sent,o(t.data),e.next=6,B()("https://counting-backend.codeformuenster.org/devices");case 6:a=e.sent,p(a.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),console.log(l),i.a.createElement("div",{className:e.root},i.a.createElement(E.a,null),i.a.createElement(w.a,{position:"absolute",className:Object(f.a)(e.appBar)},i.a.createElement(x.a,{className:e.toolbar},i.a.createElement(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title},"Dashboard"))),i.a.createElement("main",{className:e.content},i.a.createElement("div",{className:e.appBarSpacer}),i.a.createElement(j.a,{maxWidth:"lg",className:e.container},i.a.createElement(O.a,{container:!0,spacing:3},i.a.createElement(k.a,{className:e.paper},i.a.createElement(R,null)),i.a.createElement(O.a,{item:!0,xs:12},i.a.createElement(k.a,{className:e.paper},i.a.createElement(W,null,"Devices"),i.a.createElement(N.a,{size:"small"},i.a.createElement(C.a,null,i.a.createElement(M.a,null,i.a.createElement(D.a,null,"Id"),i.a.createElement(D.a,null,"Longitude"),i.a.createElement(D.a,null,"Latidue"))),i.a.createElement(z.a,null,l&&l.map((function(e){return i.a.createElement(M.a,{key:e.id},i.a.createElement(D.a,null,i.a.createElement(S.a,{href:e.id},e.id)),i.a.createElement(D.a,null,e.lon),i.a.createElement(D.a,null,e.lat))}))))))),i.a.createElement(b.a,{pt:4},i.a.createElement(T,null)))))}var X=a(499),Y=a(47);function Z(e){return i.a.createElement(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}function Q(){return i.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(S.a,{color:"inherit",href:"http://codeformuenster.org/"},"M\xfcnster Z\xe4hlt")," ",(new Date).getFullYear(),".")}var U=Object(v.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(h.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:"70vh"}}}));function $(e){var t=U(),a=e.match.params.id,n=Object(r.useState)(),o=Object(d.a)(n,2),c=o[0],s=o[1];Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()("https://counting-backend.codeformuenster.org/counts/"+a);case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]),console.log(c);var l=Object(f.a)(t.paper,t.fixedHeight),p=Object(X.a)();return i.a.createElement("div",{className:t.root},i.a.createElement(E.a,null),i.a.createElement(w.a,{position:"absolute",className:Object(f.a)(t.appBar)},i.a.createElement(x.a,{className:t.toolbar},i.a.createElement(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Dashboard"))),i.a.createElement("main",{className:t.content},i.a.createElement("div",{className:t.appBarSpacer}),i.a.createElement(j.a,{maxWidth:"lg",className:t.container},c&&c.counts&&i.a.createElement(k.a,{className:l},i.a.createElement(Z,null,a),i.a.createElement(Y.d,null,i.a.createElement(Y.c,{data:c.counts,margin:{top:16,right:16,bottom:0,left:24}},i.a.createElement(Y.e,{dataKey:"timestamp",stroke:p.palette.text.secondary}),i.a.createElement(Y.f,{stroke:p.palette.text.secondary},i.a.createElement(Y.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:p.palette.text.primary}},"Count")),i.a.createElement(Y.b,{type:"monotone",dataKey:"count",stroke:p.palette.primary.main,dot:!1})))),i.a.createElement(b.a,{pt:4},i.a.createElement(Q,null)))))}function q(){return i.a.createElement(s.a,{basename:"/mshack2020-frontend"},i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"/",exact:!0},i.a.createElement(F,null)),i.a.createElement(l.a,{path:"/:id",component:$})))}var _=a(214),ee=a(213),te=a.n(ee),ae=Object(_.a)({palette:{primary:{main:"#0CB053"},secondary:{main:te.a[500]}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(n.a,{theme:ae},i.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[268,1,2]]]);
//# sourceMappingURL=main.ea606b43.chunk.js.map